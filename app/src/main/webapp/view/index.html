
 
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>智慧军检</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <link rel="stylesheet" href="../res/layui/css/layui.css">
  <link rel="stylesheet" href="../res/css/global.css">
  <script type="text/javascript" src="../res/layui/jquery.min.js" charset="utf-8"></script>
  <script type="text/javascript" src="../res/js/baseUtils.js" charset="utf-8"></script>
</head>
<body>
<div id="header"></div>

<div class="layui-container">
  <div class="layui-row layui-col-space15">
    <div class="layui-col-md8">
      <div class="fly-panel">
        <div class="fly-panel-title fly-filter">
          <!--    TODO 新闻,不分类型,显示十条-->
          <a>最近新闻</a>
        </div>
        <ul class="fly-list" id="news_list"></ul>
        <div style="text-align: center">
          <div class="laypage-main">
            <a href="/app/view/news/news-list.html" class="laypage-next">更多新闻</a>
          </div>
        </div>
      </div>

      <div class="fly-panel" style="margin-bottom: 0;">

        <div class="fly-panel-title fly-filter">
<!--    TODO 法律学习,不分类型,显示十条-->
          <a>法律学习</a>
        </div>

        <ul class="fly-list" id="law_library_list"></ul>
        <div style="text-align: center">
          <div class="laypage-main">
            <a href="/app/view/law/library/law-library-list.html" class="laypage-next">更多法律学习</a>
          </div>
        </div>

      </div>
    </div>
    <div class="layui-col-md4">

      <div class="fly-panel">
        <h3 class="fly-panel-title">温馨通道</h3>
        <ul class="fly-panel-main fly-list-static">
          <li>
            <a href="https://www.12309.gov.cn/llzw/pjc/202005/t20200522_462451.shtml" target="_blank">全国政协委员说检察：把以人民为中心落在了实处</a>
          </li>
          <li>
            <a href="https://www.12309.gov.cn/llzw/pjc/202005/t20200522_462452.shtml" target="_blank">
                周善红代表：成立专门机构评查办案质量
            </a>
          </li>
          <li>
            <a href="https://www.12309.gov.cn/llzw/pjc/202005/t20200522_462454.shtml" target="_blank">李汉宇委员：“两长”座谈是检察机关对“两个健康”工作的有力支持</a>
          </li>
          <li>
            <a href="https://www.12309.gov.cn/llzw/pjc/202005/t20200522_462447.shtml" target="_blank">
                孙建博代表：让生态检察室成为生态资源守护者
            </a>
          </li>
          <li>
            <a href="https://www.12309.gov.cn/llzw/zybs/201910/t20191016_435433.shtml" target="_blank">最高检邀请部分全国人大代表视察海南检察工作</a>
          </li>
        </ul>
      </div>


      <div class="fly-panel">
        <div class="fly-panel-title">
          这里可作为广告区域
        </div>
        <div class="fly-panel-main">
          <a href="" target="_blank" class="fly-zanzhu" style="background-color: #393D49;">虚席以待</a>
        </div>
      </div>

      <div class="fly-panel fly-link">
        <h3 class="fly-panel-title">友情链接</h3>
        <dl class="fly-panel-main">
          <dd><a href="http://www.layui.com/" target="_blank">layui</a><dd>
          <dd><a href="http://layim.layui.com/" target="_blank">WebIM</a><dd>
          <dd><a href="http://layer.layui.com/" target="_blank">layer</a><dd>
          <dd><a href="http://www.layui.com/laydate/" target="_blank">layDate</a><dd>
          <dd><a href="mailto:xianxin@layui-inc.com?subject=%E7%94%B3%E8%AF%B7Fly%E7%A4%BE%E5%8C%BA%E5%8F%8B%E9%93%BE" class="fly-link">申请友链</a><dd>
        </dl>
      </div>

    </div>
  </div>
</div>

<div id="footer"></div>

<!-- 加载头部和尾部 -->
<script>
  $("#header").load("header.html");
  $("#footer").load("footer.html");
</script>
 
<script src="../res/layui/layui.js"></script>


<script>
  layui.use(['jquery','laytpl'], function(){
    var laytpl = layui.laytpl;
    $ = layui.jquery;

    /*查询最近新闻列表*/
    $.ajax({
      //请求方式
      type : "POST",
      //请求地址
      url : path+'/news/Page.do',
      //数据参数，json字符串
      data : {
        currentPage:1,
        pageSize:5,
        type:0
      },
      datatype:"json",
      //请求成功
      success : function(res){
        var data=[];//初始化返回数据
        var newsInfos=res.data.news.list;//得到所有新闻信息
        var newsTypes=res.data.news_type;//得到信息的类型信息
        //遍历新闻
        for(var i in newsInfos){
          var newsInfo=newsInfos[i];//得到一条新闻
          var newsType=newsTypes[newsInfo.news_type_id];//得到新闻信息对应的类型的信息
          if(null != newsType){
            type={"type":newsType.title};
          }
          $.extend(newsInfo, type);//对象合并
          data.push(newsInfo);
        }

        /*将新闻列表的详细信息嵌入*/
        var getTpl = news_list_tpl.innerHTML
                ,view = document.getElementById('news_list');
        laytpl(getTpl).render(data, function(html){
          view.innerHTML = html;
        });
        }
    });

    /*查询法务知识列表*/
    $.ajax({
      //请求方式
      type : "POST",
      //请求地址
      url : path+'/law/library/Page.do',
      //数据参数，json字符串
      data : {
        currentPage:1,
        pageSize:5,
        typeId:0
      },
      datatype:"json",
      //请求成功
      success : function(res){
        console.log(res);
        var data=[];//初始化返回数据
        var lawLibraryInfos=res.data.law_library.list;//得到所有法务知识信息
        var lawTypes=res.data.law_type;//得到法务知识信息的类型信息
        //遍历法务知识
        for(var i in lawLibraryInfos){
          var lawLibraryInfo=lawLibraryInfos[i];//得到一条法务知识
          var lawType=lawTypes[lawLibraryInfo.law_type_id];//得到法务知识信息对应的类型的信息
          if(null != lawType){
            type={"type":lawType.title};
          }
          $.extend(lawLibraryInfo, type);//对象合并
          data.push(lawLibraryInfo);
        }
        console.log(data);
        /*将新闻列表的详细信息嵌入*/
        var getTpl = law_library_list_tpl.innerHTML
                ,view = document.getElementById('law_library_list');
        laytpl(getTpl).render(data, function(html){
          view.innerHTML = html;
        });
      }
    });
  });

</script>


<!--最近新闻列表-->
<script id="news_list_tpl" type="text/html">
  {{# layui.each(d, function(index, item){ }}
    <li>
      <div style="position: absolute; left: 15px; top: 15px;">
        <h2>
          <a class="layui-badge">{{item.type}}</a>
          <a href="/app/view/news/news-detail.html?id={{item.id}}">{{item.title}}</a>
        </h2>
        <div class="fly-list-info">
          <span>
            {{item.author}}<i class="layui-icon" style="color: orange">&#xe770;</i>
          </span>

          <!--将时间戳格式化-->
          {{#
            if (CheckIsNullOrEmpty(item.create_time)){
              var date = new Date();
              var createTime = item.create_time+"000";
              date.setTime(createTime);
              var t = date.Format("yyyy-MM-dd hh:mm:ss");
          }}
          <span>{{ t }}</span>
          {{#
            }else {
          }}
          <span>no time</span>
          {{#
            }
          }}

          <span><i class="layui-icon" style="color: red">&#xe6c6;</i> {{item.like}}</span>
        </div>
      </div>
      <span style="position: absolute;right: 15px;bottom: 15px">
            <i class="layui-icon">&#xe705;</i> {{item.read}}
      </span>
    </li>
  {{#  }); }}
</script>

<!--法务知识列表-->
<script id="law_library_list_tpl" type="text/html">
  {{# layui.each(d, function(index, item){ }}
  <li>
    <div style="position: absolute; left: 15px; top: 15px;">
      <h2>
        <a class="layui-badge">{{item.type}}</a>
        <a href="/app/view/law/library/law-library-detail.html?id={{item.id}}">{{item.title}}</a>
      </h2>
      <div class="fly-list-info">
          <span>
            闲心<i class="layui-icon" style="color: orange">&#xe770;</i>
          </span>

        <!--将时间戳格式化-->
        {{#
        if (CheckIsNullOrEmpty(item.create_time)){
        var date = new Date();
        var createTime = item.create_time+"000";
        date.setTime(createTime);
        var t = date.Format("yyyy-MM-dd hh:mm:ss");
        }}
        <span>{{ t }}</span>
        {{#
        }else {
        }}
        <span>no time</span>
        {{#
        }
        }}

      </div>
    </div>
    <span style="position: absolute;right: 15px;bottom: 15px">
            <i class="layui-icon">&#xe705;</i> {{item.read}}
      </span>
  </li>
  {{#  }); }}
</script>


<script>
layui.cache.page = '';
layui.cache.user = {
  username: '游客'
  ,uid: -1
  ,avatar: '../res/images/avatar/00.jpg'
  ,experience: 83
  ,sex: '男'
};
layui.config({
  version: "3.0.0"
  ,base: '../res/mods/' //这里实际使用时，建议改成绝对路径
}).extend({
  fly: 'index'
}).use('fly');
</script>

<script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_30088308'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "w.cnzz.com/c.php%3Fid%3D30088308' type='text/javascript'%3E%3C/script%3E"));</script>

</body>
</html>