<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>智慧检查</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="../../../res/layui/css/layui.css">
    <link rel="stylesheet" href="../../../res/css/global.css">
    <script type="text/javascript" src="../../../res/layui/jquery.min.js" charset="utf-8"></script>
    <script type="text/javascript" src="../../../res/js/baseUtils.js" charset="utf-8"></script>
    <style type="text/css">
        .time_text {
            position: absolute;
            bottom: 0px;
            padding: 0px;
            margin: 0px;
            color: #999;
        }

        .detail_text {
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 7;
            -webkit-box-orient: vertical;
            font-size: 15px;
        }

        .status_1 {
            font-size: 5px;
            color: #2D93CA;
            text-align: center;
            line-height: 15px;
        }

        .status_2 {
            font-size: 5px;
            color: orange;
            text-align: center;
            line-height: 15px;
        }

        .status_3 {
            font-size: 5px;
            color: #FF5722;
            text-align: center;
            line-height: 15px;
        }

    </style>
</head>
<body>

<div id="header"></div>

<div class="layui-container fly-marginTop">
    <div class="fly-panel fly-panel-user" pad20>
        <div class="layui-tab layui-tab-brief" lay-filter="user">
            <form class="layui-form" action="">
                <div class="layui-form-item">
                    <label class="layui-form-label">咨询标题</label>
                    <div class="layui-input-block">
                        <input type="text" name="title" required lay-verify="required" placeholder="请输入标题"
                               autocomplete="off" class="layui-input">
                    </div>
                </div>
                <div class="layui-form-item layui-form-text">
                    <label class="layui-form-label">咨询内容</label>
                    <div class="layui-input-block">
                        <textarea name="question" placeholder="请输入内容" class="layui-textarea"></textarea>
                    </div>
                </div>
                <div class="layui-form-item">
                    <div class="layui-input-block">
                        <button class="layui-btn" lay-submit lay-filter="formDemo">立即进入房间</button>
                        <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                    </div>
                </div>



            </form>

            <div class="layui-col-md2">
                <div class="layui-form-item">
                    <button class="layui-btn" lay-submit id="connserver" lay-filter="connserver" lay-filter="connserver">Connect Sig
                        Server
                    </button>
                    <button class="layui-btn" lay-submit id="leave" lay-filter="leave" disabled>Leave</button>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-col-md5">
                    <h2>Local:</h2>
                    <video id="localvideo" autoplay playsinline></video>
                </div>
            </div>

            <div class="layui-form-item">
                <div class="layui-col-md5">
                    <h2>Remote:</h2>
                    <video id="remotevideo" autoplay playsinline></video>
                </div>
            </div>
        </div>
    </div>

</div>

<div id="footer"></div>

<!-- 加载头部和尾部 -->
<script>
    $("#header").load("../../header.html");
    $("#footer").load("../../footer.html");
</script>

<script src="../../../res/layui/layui.js"></script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
<script src="../js/adapter-latest.js"></script>
<script src="../js/client.js"></script>


<script>
    //Demo
    layui.use(['form', 'layer','tree','util'], function() {
        $ = layui.jquery;
        var form = layui.form, layer = layui.layer;
        var tree = layui.tree;
        var util = layui.util;

        //监听提交
        form.on('submit(formDemo)', function (data) {
            var field = data.field;
            var request = {};
            request.title = field['title'];
            request.question = field['question'];
            $.ajax({
                url: path + "/law/help/video.do",
                type: "POST",
                data: {"request": JSON.stringify(request)},
                dataType: "json",
                success: function (data) {
                    if (data.success) {
                        message('新增成功', 1, layer);
                    } else {
                        message('新增失败', 2, layer);
                    }
                }
            });
        });

        //监听connect
        form.on('submit(connserver)', function (data) {
            alert("go");
            $.ajax({
                url: path + "/law/help/video/getRoomByUserId.do",
                type: "POST",
                data: {"userId": 10001},
                dataType: "json",
                success: function (data) {
                    if (data.success) {
                        connSignalServer(data.data.room);
                    } else {
                        alert("fail");
                    }
                }
            });
        });

    });
</script>
</body>
</html>